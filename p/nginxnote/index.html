<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='NginxNote 1、介绍   反向代理 （1）正向代理
 在客户端配置代理服务器，通过代理服务器进行访问   （2）反向代理
 客户端无需配置，将请求发送到反向代理服务器，反向代理服务器从真实服务器获取数据后返回到客户端。此时反向代理服务器和真实服务器被看做一个服务器，暴露的是反向代理服务器，隐藏了真实服务器的ip地址    负载均衡
 将客户端的请求分发到不同服务器上     动静分离
 使用不同的服务器解析动态页面和静态页面，加快解析速度，降低单个服务器的压力     2、安装Nginx  xshell连接linux操作系统  下载nginx 使用sudo -命令切换到root用户 安装编译工具及库文件yum -y install make zlib zlib-devel gcc-c&#43;&#43; libtool openssl openssl-devel 安装PCRE 1 2  cd /usr/local/src wget http://downloads.sourceforge.net/project/pcre/pcre/8.45/pcre-8.45.tar.gz    解压tar -zxvf pcre-8.45.tar.gz 编译安装 1 2 3  cd pcre-8.45 ./configure make &amp;amp;&amp;amp; make install    查看版本pcre-config --version 上传nginx安装包并解压tar -zxvf nginx-1.'><title>Nginx笔记</title>

<link rel='canonical' href='https://WangZichen99.github.io/p/nginxnote/'>

<link rel="stylesheet" href="/scss/style.min.5a8e892f6fa14515e9065eee1f5d2e05302606ec7f11750b2fb95198f9cdcbfd.css"><meta property='og:title' content='Nginx笔记'>
<meta property='og:description' content='NginxNote 1、介绍   反向代理 （1）正向代理
 在客户端配置代理服务器，通过代理服务器进行访问   （2）反向代理
 客户端无需配置，将请求发送到反向代理服务器，反向代理服务器从真实服务器获取数据后返回到客户端。此时反向代理服务器和真实服务器被看做一个服务器，暴露的是反向代理服务器，隐藏了真实服务器的ip地址    负载均衡
 将客户端的请求分发到不同服务器上     动静分离
 使用不同的服务器解析动态页面和静态页面，加快解析速度，降低单个服务器的压力     2、安装Nginx  xshell连接linux操作系统  下载nginx 使用sudo -命令切换到root用户 安装编译工具及库文件yum -y install make zlib zlib-devel gcc-c&#43;&#43; libtool openssl openssl-devel 安装PCRE 1 2  cd /usr/local/src wget http://downloads.sourceforge.net/project/pcre/pcre/8.45/pcre-8.45.tar.gz    解压tar -zxvf pcre-8.45.tar.gz 编译安装 1 2 3  cd pcre-8.45 ./configure make &amp;amp;&amp;amp; make install    查看版本pcre-config --version 上传nginx安装包并解压tar -zxvf nginx-1.'>
<meta property='og:url' content='https://WangZichen99.github.io/p/nginxnote/'>
<meta property='og:site_name' content='wzc blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Nginx' /><meta property='article:published_time' content='2022-07-24T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-07-24T00:00:00&#43;00:00'/><meta property='og:image' content='https://WangZichen99.github.io/img/2022/07/colorful_river.jpg' />
<meta name="twitter:title" content="Nginx笔记">
<meta name="twitter:description" content="NginxNote 1、介绍   反向代理 （1）正向代理
 在客户端配置代理服务器，通过代理服务器进行访问   （2）反向代理
 客户端无需配置，将请求发送到反向代理服务器，反向代理服务器从真实服务器获取数据后返回到客户端。此时反向代理服务器和真实服务器被看做一个服务器，暴露的是反向代理服务器，隐藏了真实服务器的ip地址    负载均衡
 将客户端的请求分发到不同服务器上     动静分离
 使用不同的服务器解析动态页面和静态页面，加快解析速度，降低单个服务器的压力     2、安装Nginx  xshell连接linux操作系统  下载nginx 使用sudo -命令切换到root用户 安装编译工具及库文件yum -y install make zlib zlib-devel gcc-c&#43;&#43; libtool openssl openssl-devel 安装PCRE 1 2  cd /usr/local/src wget http://downloads.sourceforge.net/project/pcre/pcre/8.45/pcre-8.45.tar.gz    解压tar -zxvf pcre-8.45.tar.gz 编译安装 1 2 3  cd pcre-8.45 ./configure make &amp;amp;&amp;amp; make install    查看版本pcre-config --version 上传nginx安装包并解压tar -zxvf nginx-1."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://WangZichen99.github.io/img/2022/07/colorful_river.jpg' />
    <link rel="shortcut icon" href="img/logo.jpg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/logo_hu85fde6896bfba54d009cf04dd23be76c_55757_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">wzc blog</a></h1>
            <h2 class="site-description">A programmer birth in 1999.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/WangZichen99'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/nginxnote/">
                
                    <img src="/img/2022/07/colorful_river.jpg" loading="lazy" alt="Featured image of post Nginx笔记" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" >
                学习笔记
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/nginxnote/">Nginx笔记</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 24, 2022</time>
            </div>
        

        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h1 id="nginxnote">NginxNote</h1>
<h2 id="1介绍">1、介绍</h2>
<ol>
<li>
<p>反向代理 （1）正向代理</p>
<ul>
<li>在客户端配置代理服务器，通过代理服务器进行访问
<img src="/../../img/2022/07/nginx_note/image-20220710114341138.png"
	
	
	
	loading="lazy"
	
		alt="image-20220710114341138"
	
	
></li>
</ul>
<p>（2）反向代理</p>
<ul>
<li>客户端无需配置，将请求发送到反向代理服务器，反向代理服务器从真实服务器获取数据后返回到客户端。此时反向代理服务器和真实服务器被看做一个服务器，暴露的是反向代理服务器，隐藏了真实服务器的ip地址</li>
</ul>
</li>
<li>
<p>负载均衡</p>
<ul>
<li>将客户端的请求分发到不同服务器上
<img src="/../../img/2022/07/nginx_note/image-20220710121014443.png"
	
	
	
	loading="lazy"
	
		alt="image-20220710121014443"
	
	
></li>
</ul>
</li>
<li>
<p>动静分离</p>
<ul>
<li>使用不同的服务器解析动态页面和静态页面，加快解析速度，降低单个服务器的压力
<img src="/../../img/2022/07/nginx_note/image-20220710122411951.png"
	
	
	
	loading="lazy"
	
		alt="image-20220710122411951"
	
	
></li>
</ul>
</li>
</ol>
<h2 id="2安装nginx">2、安装Nginx</h2>
<ol>
<li>xshell连接linux操作系统
<img src="/../../img/2022/07/nginx_note/image-20220710170800526.png"
	
	
	
	loading="lazy"
	
		alt="image-20220710170800526"
	
	
></li>
<li><a class="link" href="https://nginx.org/en/download.html"  target="_blank" rel="noopener"
    >下载nginx</a></li>
<li>使用<code>sudo -</code>命令切换到root用户</li>
<li>安装编译工具及库文件<code>yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</code></li>
<li>安装PCRE
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/src
</span></span><span class="line"><span class="cl">wget http://downloads.sourceforge.net/project/pcre/pcre/8.45/pcre-8.45.tar.gz
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>解压<code>tar -zxvf pcre-8.45.tar.gz</code></li>
<li>编译安装
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> pcre-8.45
</span></span><span class="line"><span class="cl">./configure
</span></span><span class="line"><span class="cl">make <span class="o">&amp;&amp;</span> make install
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>查看版本<code>pcre-config --version</code></li>
<li>上传nginx安装包并解压<code>tar -zxvf nginx-1.22.0.tar.gz</code></li>
<li>编译安装</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> nginx-1.22.0
</span></span><span class="line"><span class="cl">./configure
</span></span><span class="line"><span class="cl">make <span class="o">&amp;&amp;</span> make install
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="11">
<li>安装成功后，在/usr/local/nginx/sbin/下有nginx的启动脚本，启动nginx</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/nginx/sbin/
</span></span><span class="line"><span class="cl">./nginx
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="12">
<li>查看是否成功启动<code>ps -ef|grep nginx</code></li>
</ol>
<h2 id="3配置nginx开放80端口">3、配置Nginx开放80端口</h2>
<p>nginx配置文件位置在/usr/local/nginx/conf/nginx.conf中</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">#开启防火墙</span>
</span></span><span class="line"><span class="cl">service firewalld start
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#重启防火墙</span>
</span></span><span class="line"><span class="cl">service firewalld restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#关闭防火墙</span>
</span></span><span class="line"><span class="cl">service firewalld stop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#查看开放的端口号</span>
</span></span><span class="line"><span class="cl">firewall-cmd --list-all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#设置添加http服务</span>
</span></span><span class="line"><span class="cl">firewall-cmd --add-service<span class="o">=</span>http --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#设置开放的端口号, --permanent表示持久的</span>
</span></span><span class="line"><span class="cl">firewall-cmd --add-port<span class="o">=</span>80/tcp --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#移除端口号</span>
</span></span><span class="line"><span class="cl">firewall-cmd --remove-port<span class="o">=</span>80/tcp --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#重启防火墙</span>
</span></span><span class="line"><span class="cl">firewall-cmd --reload
</span></span></code></pre></td></tr></table>
</div>
</div><p>在浏览器中输入linux的ip地址可以看到nginx的页面
<img src="/../../img/2022/07/nginx_note/image-20220710182916916.png"
	
	
	
	loading="lazy"
	
		alt="image-20220710182916916"
	
	
></p>
<h2 id="4nginx常用命令">4、Nginx常用命令</h2>
<ul>
<li>必须在/usr/local/nginx/sbin中执行命令</li>
</ul>
<ol>
<li>查看nginx版本号</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./nginx -v
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>启动nginx</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./nginx
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>安全退出nginx</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./nginx -s quit
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>关闭nginx</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./nginx -s stop
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>重新加载nginx</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./nginx -s reload
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5nginx配置文件">5、Nginx配置文件</h2>
<ul>
<li>nginx配置文件位置：/usr/local/nginx/conf/nginx.conf</li>
</ul>
<h3 id="51配置文件组成部分">5.1、配置文件组成部分</h3>
<h4 id="511全局块">5.1.1、全局块</h4>
<ul>
<li>从配置文件开始到events块之前的内容，包含一些nginx服务器运行的配置命令，例如：用户组、worker process数、进程PID存放路径、日志路径等等</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">worker_process 1; 值越大，可支持的并发量越大，一般设置成CPU核心数或auto
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="512events块">5.1.2、events块</h4>
<ul>
<li>events块设置的是nginx服务器与用户的网络连接，例如：是否允许同时接收多个网络连接，每个worker_process支持的最大连接数等等，这部分配置对nginx的性能影响较大，在实际中应该灵活配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">worker_connections  1024; 每个worker process支持的最大连接数为1024
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="513http块">5.1.3、http块</h4>
<ul>
<li>配置最频繁的部分，例如：代理、缓存和日志等等，http块包括http全局块和server块</li>
</ul>
<ol>
<li>http全局块：包括文件引入、MIME-TYPE定义、日志定义、连接超时时间、单链接请求上限数等等</li>
<li>server块：和虚拟主机有密切关系，每个http块可以包含多个server块，每个server块就相当于一个虚拟主机，server块可以分为全局server块和location块，一个server块可以包含多个location块
<ol>
<li>全局server块：配置虚拟主机的监听配置和虚拟主机的名称及IP配置等等</li>
<li>location块：根据url对特定的请求做特定的处理，地址定向、数据缓存和应答控制等功能</li>
</ol>
</li>
</ol>
<p><img src="/../../img/2022/07/nginx_note/image-20220716201554852.png"
	
	
	
	loading="lazy"
	
		alt="image-20220716201554852"
	
	
></p>
<h2 id="6nginx反向代理">6、Nginx反向代理</h2>
<ul>
<li>
<p>准备工作：安装tomcat</p>
<ol>
<li>
<p>安装jdk</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">yum install -y java-1.8.0-openjdk
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>查看是否安装成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">java -version
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>查看jdk安装位置，默认路径为/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-1.el7_9.x86_64/jre/bin/java</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find / -name <span class="s1">&#39;java&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>创建文件夹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mkdir /usr/local/tomcat
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>下载tomcat</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.64/bin/apache-tomcat-9.0.64.tar.gz --no-check-certificate
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>解压</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">tar -zxvf apache-tomcat-9.0.64.tar.gz
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>添加防火墙端口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">firewall-cmd --add-port<span class="o">=</span>8080/tcp --permanent <span class="o">&amp;&amp;</span> firewall-cmd --reload
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>启动tomcat</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> apache-tomcat-9.0.64/bin/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">./startup.sh
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>访问8080端口查看</p>
<p><img src="/../../img/2022/07/nginx_note/image-20220717113005933.png"
	
	
	
	loading="lazy"
	
		alt="image-20220717113005933"
	
	
></p>
</li>
</ol>
</li>
<li>
<p>反向代理过程</p>
<p><img src="/../../img/2022/07/nginx_note/image-20220717115259965.png"
	
	
	
	loading="lazy"
	
		alt="image-20220717115259965"
	
	
></p>
</li>
<li>
<p>nginx配置</p>
<p><img src="/../../img/2022/07/nginx_note/image-20220717153209628.png"
	
	
	
	loading="lazy"
	
		alt="image-20220717153209628"
	
	
></p>
</li>
</ul>
<blockquote>
<p>注意：</p>
<ul>
<li>proxy_pass只是替换server_name:listen，location不会改变，所以如果proxy_pass上没有location，就会404</li>
<li>location <strong>~</strong> /user/ 表示使用正则匹配，并且区分大小写，如果url中包含user就响应
&gt;</li>
</ul>
</blockquote>
<ul>
<li><strong>~</strong>* 表示正则匹配，并且不区分大小写</li>
</ul>
<blockquote>
<pre><code>- **=** 表示严格匹配，如果匹配成功则立即处理该请求
</code></pre>
</blockquote>
<h2 id="7nginx负载均衡">7、Nginx负载均衡</h2>
<ul>
<li>nginx配置</li>
</ul>
<p><img src="/../../img/2022/07/nginx_note/image-20220723173116288.png"
	
	
	
	loading="lazy"
	
		alt="image-20220723173116288"
	
	
></p>
<ul>
<li>
<p>nginx负载均衡分配策略</p>
<ol>
<li>轮询（默认）：每个请求按照时间顺序注意分配到不同服务器上，如果某一服务器挂掉，自动剔除改服务器</li>
<li>weight：权重默认为1，权重越高，分配到改服务器上的请求越多</li>
<li>ip_hash：每个请求按访问ip的hash结果分配，每个请求固定访问某一台服务器，可以解决session共享问题</li>
</ol>
<p><img src="/../../img/2022/07/nginx_note/image-20220723174644184.png"
	
	
	
	loading="lazy"
	
		alt="image-20220723174644184"
	
	
></p>
<ol start="4">
<li>fair（第三方）：按照后端响应时间分配，最短响应时间优先</li>
</ol>
</li>
</ul>
<h2 id="8nginx动静分离">8、Nginx动静分离</h2>
<ul>
<li>
<p>动静分离指将动态请求与静态请求分开，实现角度分为两种：</p>
<ol>
<li>将静态文件放在单独的静态服务器上访问（主流方案）
2.
静态文件和动态文件放在同一个服务器上，通过location指定不同的后缀名实现静态文件的区分。通过expires参数设置浏览器缓存过期时间可以减少客户端与服务端之间的请求，过期时间由浏览器验证，到达过期时间后向服务端发送请求对比静态文件最后更新时间，如果有变化则从服务器获取最新静态文件，这种方法适合不经常变动的静态资源</li>
</ol>
</li>
<li>
<p>nginx配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">location / {
</span></span><span class="line"><span class="cl">	root /app/static/;
</span></span><span class="line"><span class="cl">	autoindex on;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /html/ {
</span></span><span class="line"><span class="cl">	root   /app/static/;
</span></span><span class="line"><span class="cl">	index  index.html index.htm;
</span></span><span class="line"><span class="cl">	autoindex on;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /img/ {
</span></span><span class="line"><span class="cl">	root  /app/static/;
</span></span><span class="line"><span class="cl">	autoindex on;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/../../img/2022/07/nginx_note/image-20220723200624360.png"
	
	
	
	loading="lazy"
	
		alt="image-20220723200624360"
	
	
></p>
<p><img src="/../../img/2022/07/nginx_note/image-20220723200722738.png"
	
	
	
	loading="lazy"
	
		alt="image-20220723200722738"
	
	
></p>
</li>
</ul>
<h2 id="9nginx高可用">9、Nginx高可用</h2>
<ul>
<li>当反向代理服务器挂掉后会导致用户无法访问服务端，所以需要增加一台Nginx反向代理服务器来保证高可用</li>
</ul>
<p><img src="/../../img/2022/07/nginx_note/image-20220724092910742.png"
	
	
	
	loading="lazy"
	
		alt="image-20220724092910742"
	
	
></p>
<ul>
<li>
<p>当主服务器挂掉后keepalived会检测到服务器状态，将虚拟ip映射到备用服务器上，保证客户端的正常访问</p>
<ul>
<li>
<p>准备工作：</p>
<ol>
<li>
<p>安装keepalived</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">    <span class="c1"># yum安装keepalived</span>
</span></span><span class="line"><span class="cl">    yum install keepalived -y
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 查看版本</span>
</span></span><span class="line"><span class="cl">    keepalived -v
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>keepalived配置文件位置：/etc/keepalived/keepalived.conf</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">! Configuration File for keepalived
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">global_defs {
</span></span><span class="line"><span class="cl">   #notification_email { # 通知邮件，一般不用
</span></span><span class="line"><span class="cl">   #  acassen@firewall.loc
</span></span><span class="line"><span class="cl">   #  failover@firewall.loc
</span></span><span class="line"><span class="cl">   #  sysadmin@firewall.loc
</span></span><span class="line"><span class="cl">   #}
</span></span><span class="line"><span class="cl">   #notification_email_from Alexandre.Cassen@firewall.loc
</span></span><span class="line"><span class="cl">   smtp_server 192.168.200.1
</span></span><span class="line"><span class="cl">   smtp_connect_timeout 30
</span></span><span class="line"><span class="cl">   router_id LVS_DEVEL # 标识本节点字符串
</span></span><span class="line"><span class="cl">   vrrp_skip_check_adv_addr
</span></span><span class="line"><span class="cl">   vrrp_strict chk_http_port { # 检查主服务器状态执行脚本配置
</span></span><span class="line"><span class="cl">       script &#34;/usr/local/src/nginx_check.sh&#34; # 脚本位置
</span></span><span class="line"><span class="cl">       interval 2 # 执行脚本时间间隔
</span></span><span class="line"><span class="cl">       weight 2
</span></span><span class="line"><span class="cl">   }
</span></span><span class="line"><span class="cl">   vrrp_garp_interval 0
</span></span><span class="line"><span class="cl">   vrrp_gna_interval 0
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">vrrp_instance VI_1 {
</span></span><span class="line"><span class="cl">    state MASTER # 主服务器为MASTER，备服务器为BACKUP
</span></span><span class="line"><span class="cl">    interface ens33 # 网卡
</span></span><span class="line"><span class="cl">    virtual_router_id 51 # 主备服务器需要相同
</span></span><span class="line"><span class="cl">    priority 100 # 优先级，主服务器大于备服务器
</span></span><span class="line"><span class="cl">    advert_int 1 # MASTER和BACKUP节点之间的同步检查时间间隔，单位为秒
</span></span><span class="line"><span class="cl">    authentication { # 验证类型和验证密码
</span></span><span class="line"><span class="cl">        auth_type PASS
</span></span><span class="line"><span class="cl">        auth_pass 1111
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    virtual_ipaddress { # 虚拟IP地址池，可以多个IP
</span></span><span class="line"><span class="cl">        192.168.200.16
</span></span><span class="line"><span class="cl">        192.168.200.17
</span></span><span class="line"><span class="cl">        192.168.200.18
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>nginx_check.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>ps -C nginx --no-header <span class="p">|</span>wc -l<span class="sb">`</span> -eq 0<span class="o">]</span><span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">    /usr/local/nginx/sbin/nginx
</span></span><span class="line"><span class="cl">    sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>ps -C nginx --no-header <span class="p">|</span>wc -l<span class="sb">`</span> -eq 0<span class="o">]</span><span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">        killall keepalived <span class="c1"># systemctl stop keepalived</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>启动keepalived</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">systemctl start keepalived.service
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
</li>
<li>
<p>通过ip a可以查看到虚拟ip</p>
<p><img src="/../../img/2022/07/nginx_note/image-20220724155145881.png"
	
	
	
	loading="lazy"
	
		alt="image-20220724155145881"
	
	
></p>
</li>
</ul>
<h2 id="10nginx原理">10、Nginx原理</h2>
<p><img src="/../../img/2022/07/nginx_note/image-20220724163125071.png"
	
	
	
	loading="lazy"
	
		alt="image-20220724163125071"
	
	
></p>
<ul>
<li>nginx分为master进程和worker进程，其中worker进程可能有多个，当客户端发送请求后，master收到客户端的请求，所有的worker进程会争抢客户端的请求，然后进行发送到服务端处理</li>
<li>多个worker进程的好处：
<ol>
<li>在reload时，没有争抢请求的worker进程可以进行reload，有利于热部署</li>
<li>每个worker是独立的进程，如果某一个worker进程挂掉，其他worker还可以正常工作，worker进程的数量通常和服务器cpu数相等</li>
</ol>
</li>
</ul>
<blockquote>
<ol>
<li>
<p>worker发送请求占用了几个连接数？
&gt;
&gt;     2个（静态请求）或4个（动态请求）</p>
</li>
<li>
<p>如果Nginx有一个master，四个worker，每个worker最大连接数为1024，那么最大并发数是多少？
&gt;
&gt;     如果是静态请求，并发数为4（worker的数量） * 1024（worker最大连接数） / 2
&gt;
&gt;     如果是动态请求，并发数为4 * 1024 / 4</p>
</li>
</ol>
</blockquote>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/nginx/">Nginx</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/redisnote/">
        
        
            <div class="article-image">
                
                    <img src="/img/2022/11/autumn_forest.jpg" loading="lazy" data-key="RedisNote" data-hash="/img/2022/11/autumn_forest.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Redis笔记</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/springbootnote/">
        
        
            <div class="article-image">
                
                    <img src="/img/2022/07/nature_park.jpg" loading="lazy" data-key="SpringBootNote" data-hash="/img/2022/07/nature_park.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">SpringBoot笔记</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/springmvcnote/">
        
        
            <div class="article-image">
                
                    <img src="/img/2022/04/beach.png" loading="lazy" data-key="SpringMVCNote" data-hash="/img/2022/04/beach.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">SpringMVC笔记</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/mybatisnote/">
        
        
            <div class="article-image">
                
                    <img src="/img/2022/03/lake.jpg" loading="lazy" data-key="MybatisNote" data-hash="/img/2022/03/lake.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Mybatis笔记</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/springnote/">
        
        
            <div class="article-image">
                
                    <img src="/img/2022/03/trees_road.jpg" loading="lazy" data-key="SpringNote" data-hash="/img/2022/03/trees_road.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Spring笔记</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2022 wzc blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.12.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#1介绍">1、介绍</a></li>
    <li><a href="#2安装nginx">2、安装Nginx</a></li>
    <li><a href="#3配置nginx开放80端口">3、配置Nginx开放80端口</a></li>
    <li><a href="#4nginx常用命令">4、Nginx常用命令</a></li>
    <li><a href="#5nginx配置文件">5、Nginx配置文件</a>
      <ol>
        <li><a href="#51配置文件组成部分">5.1、配置文件组成部分</a>
          <ol>
            <li><a href="#511全局块">5.1.1、全局块</a></li>
            <li><a href="#512events块">5.1.2、events块</a></li>
            <li><a href="#513http块">5.1.3、http块</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#6nginx反向代理">6、Nginx反向代理</a></li>
    <li><a href="#7nginx负载均衡">7、Nginx负载均衡</a></li>
    <li><a href="#8nginx动静分离">8、Nginx动静分离</a></li>
    <li><a href="#9nginx高可用">9、Nginx高可用</a></li>
    <li><a href="#10nginx原理">10、Nginx原理</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
